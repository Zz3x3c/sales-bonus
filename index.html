<!doctype html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Анализ продаж магазина</title>
</head>
<body>
    <h1>Анализ продаж магазина</h1>

    <script src="data/dataset_1.js"></script>
    <script src="src/main.js"></script>
    <script>
        try {
            const report = analyzeSalesData(data, {
                calculateRevenue: calculateSimpleRevenue,
                calculateBonus: calculateBonusByProfit
            });

            // Создаем упрощенную версию для таблицы (без вложенных массивов)
            const tableData = report.map(seller => ({
                seller_id: seller.seller_id,
                name: seller.name,
                revenue: seller.revenue,
                profit: seller.profit,
                sales_count: seller.sales_count,
                bonus: seller.bonus,
                top_products: seller.top_products.map(p => `${p.sku}(${p.quantity})`).join(', ')
            }));

            console.table(tableData);
        } catch (error) {
            console.error('Ошибка при анализе данных:', error);
        }
    </script>
</body>
</html>
